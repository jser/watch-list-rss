<!doctype html><html lang="ja"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="JSer.infoの情報源となるサイトのRSSフィードをまとめたサイトです。JavaScriptの情報源を集めることを目的としています。"><meta name="author" content="jser"><meta name="robots" content="index, follow"><meta property="og:url" content="https://jser.info/watch-list-rss/"><meta property="og:title" content="mizdra&amp;#39;s blogのフィード｜JSer.info Watch List RSS"><meta property="og:image" content="https://jser.info/watch-list-rss/images/og-image.png?hash=c56ba3x"><meta property="og:description" content="JSer.infoの情報源となるサイトのRSSフィードをまとめたサイトです。JavaScriptの情報源を集めることを目的としています。"><meta property="og:type" content="website"><meta property="og:site_name" content="JSer.info Watch List RSS"><meta property="og:locale" content="ja_JP"><meta name="twitter:card" content="summary"><meta property="twitter:domain" content="https://jser.info/watch-list-rss/"><meta property="twitter:url" 
content="https://jser.info/watch-list-rss/"><meta name="twitter:title" content="mizdra&amp;#39;s blogのフィード｜JSer.info Watch List RSS"><meta name="twitter:description" content="JSer.infoの情報源となるサイトのRSSフィードをまとめたサイトです。JavaScriptの情報源を集めることを目的としています。"><meta name="twitter:image" content="https://jser.info/watch-list-rss/images/og-image.png?hash=c56ba3x"><meta name="thumbnail" content="https://jser.info/watch-list-rss/images/og-image.png?hash=c56ba3x"><link rel="preload" href="../../styles/bundle.css" as="style"><link rel="shortcut icon" href="../../images/favicon.ico"><link rel="apple-touch-icon" href="../../images/apple-icon.png"><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="../../feeds/atom.xml"><link rel="alternate" type="application/rss+xml" title="RSS2.0" href="../../feeds/rss.xml"><link rel="alternate" type="application/json" href="../../feeds/feed.json"><link rel="stylesheet" type="text/css" href="../../styles/bundle.css"><script async 
src="https://www.googletagmanager.com/gtag/js?id=G-Q66PHF829Y"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Q66PHF829Y")</script><title>mizdra&amp;#39;s blogのフィード｜JSer.info Watch List RSS</title></head><body><header role="banner" class="ui-section-header"><div class="ui-layout-container"><div class="ui-section-header__layout ui-layout-flex"><a href="https://jser.info/watch-list-rss/" role="link" aria-label="#"><img src="../../images/icon.png" alt="サイトロゴ" loading="eager" width="96" height="96"> <span class="ui-section-header__title">JSer.info Watch List RSS</span> </a><a href="https://github.com/jser/watch-list-rss/" role="link" aria-label="#"><img src="../../images/github-mark.png" alt="GitHubロゴ" loading="eager" width="96" height="96"></a></div></div></header><main role="main"><nav class="ui-nav"><div class="ui-layout-container"><div class="ui-section-nav__layout ui-layout-flex"><a 
class="ui-section-nav__link" href="../../">フィード</a> <a class="ui-section-nav__link" href="../../hot/">人気フィード</a> <a class="ui-section-nav__link" href="../../blogs/">ブログ一覧</a></div></div></nav><section class="ui-section-content ui-section-feed"><div class="ui-layout-container"><h2 class="ui-typography-heading">mizdra&#39;s blog</h2><div class="ui-container-blog-summary"><div class="ui-blog-summary"><a class="ui-blog-summary__link" href="https://www.mizdra.net/">https://www.mizdra.net/</a><p class="ui-blog-summary__description">ぽよぐらみんぐ</p></div></div><h3 class="ui-typography-heading">フィード</h3><div class="ui-section-content--feature ui-layout-grid ui-layout-grid-3 ui-container-feed ui-container-feed--no-image"><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2024/10/19/172323"><picture><source type="image/webp" srcset="../../images/feed-thumbnails/-vB_VtlYWh-150.webp 150w, ../../images/feed-thumbnails/-vB_VtlYWh-450.webp 450w" sizes="100vw">
<source type="image/jpeg" srcset="../../images/feed-thumbnails/-vB_VtlYWh-150.jpeg 150w, ../../images/feed-thumbnails/-vB_VtlYWh-450.jpeg 450w" sizes="100vw"><img alt="記事のアイキャッチ画像" loading="lazy" decoding="async" src="../../images/feed-thumbnails/-vB_VtlYWh-150.jpeg" width="450" height="269"></picture></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2024/10/19/172323">zsh + fzf で「あの時作業していたあのブランチ」を快適に探す</a><div class="ui-feed-item__hatena-count" title="はてなブックマーク数"><img src="../../images/hatenabookmark-icon.png" alt="はてなブックマークアイコン" loading="lazy" width="96" height="96"> <span>166</span></div><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
今まで id:mizdra はターミナルで Git ブランチを切り替えるときに、zsh + peco を使った Git ブランチ検索用のキーバインドを使用していた。 # .zshrc function select-git-branch() { selected_branch=$(git branch | cut -c 3- | peco) BUFFER=&quot;${LBUFFER}${selected_branch}${RBUFFER}&quot; CURSOR=$#LBUFFER+$#selected_branch zle redisplay } zle -N select-git-branch bind…</div><div class="ui-feed-item__date" title="2024-10-19 08:23:23">6日前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2024/08/27/190853"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2024/08/27/190853">React Server Components で時限式コンポーネントを作る</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
特定の時間になったらコンテンツをページに出したい、ということがあると思う。漫画サービスなら「ゴールデンウィーク限定！全話無料キャンペーン！」みたいなのとか。 普段の業務ではこうしたことを実現するために、時限式コンポーネントや、ScheduledComponent などと呼ばれるものを作ってる *1。 // components/ScheduledComponent.tsx export function ScheduledComponent({showAt, children}: { showAt: Date; children: React.ReactNode; }) { if (new D…</div><div class="ui-feed-item__date" title="2024-08-27 10:08:53">2ヶ月前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2024/08/12/172132"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2024/08/12/172132">builderscon 2024 に参加 &amp; 登壇発表しました</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
2024/08/10 (土) に「builderscon 2024」に参加してきました。 fortee.jp 発表 ありがたいことに「React Server Components の疑問を解き明かす」という題で発表させて頂くことができました。 speakerdeck.com React Server Component (RSC) は、サーバーサイド上でレンダリングされる React コンポーネントです。React Server Component を用いると、コンポーネントの中から DB にアクセスしたり、ファイルシステムにアクセスしたりできます。 一方で、今までにも erb や pug …</div><div class="ui-feed-item__date" title="2024-08-12 08:21:32">2ヶ月前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2024/07/27/193815"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2024/07/27/193815">tsconfig.json の include オプションには何を指定すべきか</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
TL;DR &quot;include&quot;: [&quot;src/index.ts&quot;] はやめよう src 配下にあるのに型チェックされない &amp; auto-import できないファイルが生まれてしまう &quot;include&quot;: [&quot;src/**/*&quot;] や &quot;include&quot;: [&quot;**/*&quot;] がオススメ どっちが良いかはプロジェクトによる &quot;include&quot;: [&quot;src/**/*&quot;] は &quot;include&quot;: [&quot;src&quot;] と、&quot;include&quot;: [&quot;**/*&quot;] は include 指定無しと同じなので、それでも OK すっごい凝りたいなら Solution Style tsconfig.json を使…</div><div class="ui-feed-item__date" title="2024-07-27 10:38:15">3ヶ月前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2024/07/18/163643"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2024/07/18/163643">閉じている details 要素に `#fragment` でジャンプして、ジャンプと同時に展開したい</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div 
class="ui-feed-item__summary">最近用語集のようなページを作る機会があった。それぞれの用語の名前と説明がバーっと並んでて、説明部分は &lt;details&gt; 要素で隠されている。用語の名前をクリックすると &lt;details&gt; が展開されて、説明部分が読める、といった感じ。 用語集ページの例 他のページから特定の用語の説明に飛べるように、用語を表す要素それぞれに id 属性が振ってある。例えば https://glossary.example.com/#javascript という URL でアクセスすると、「JavaScript」の用語がある位置にスクロールした状態で、用語集ページを開ける。 ただ (一部ブラウザで) https…</div><div class="ui-feed-item__date" title="2024-07-18 07:36:43">3ヶ月前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2024/06/21/143719"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2024/06/21/143719">Node.js の --require/--import オプションについて</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
Node.js には --require=module と --import=module というオプションがあります。このオプションを使うと、エントリポイントとなるプログラムよりも前に、任意のモジュールを実行できます。 例えば以下のようなコマンドを実行すると、Node.js ランタイムはまず最初に preload.cjs を実行し、それから main.mjs を実行できます。 node --require ./preload.cjs main.mjs エントリポイントよりも前に、何かしらの処理を実行したい時に使うことを想定しています。 --require と --import の違い --i…</div><div class="ui-feed-item__date" title="2024-06-21 05:37:19">4ヶ月前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2024/06/16/113703"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2024/06/16/113703">GitHub Sponsors 始めました</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
GitHub Sponsors 始めました。以下のページからスポンサーできます。 github.com 主に僕が作った OSS を使っている方、ブログを読んだりしている方からスポンサーして頂くことを想定しています。僕の OSS や記事がきっかけで、僕を支援をしたいと思った方がいらっしゃれば、是非スポンサー登録をしてみてください。 GitHub Sponsors を始めた理由 ちょっとした OSS を繰り返し作っていった結果、その OSS をメンテナンスする時間が増えてきました。情熱的に OSS 活動に時間を注がれている方と比較するとそうでもないかもしれませんが、個人的にはそこそこ OSS のメ…</div><div class="ui-feed-item__date" title="2024-06-16 02:37:03">4ヶ月前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2024/05/25/173706"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2024/05/25/173706">tsc の代替実装は作れるのか</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
tsc の代替実装を作る話、とりわけ Rust や Go で tsc を高速化した移植版を作る話について。非常に野心的で面白いと思いつつ、正直僕は実用レベルまで達したものが本当に登場するのか疑問に思っている。今ある型システムもそうだし、新機能として追加されるものにも追従する必要がある。当然、実用レベルとして使ってもらうには、不具合も少なくないといけない。 それに tsc も最近はパフォーマンス改善に力を入れているように見えている。実際にリリースノートを見ると、ちょくちょくパフォーマンス改善系の変更が入っている。 TypeScript: Documentation - TypeScript 4.…</div><div class="ui-feed-item__date" title="2024-05-25 08:37:06">5ヶ月前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2024/04/01/092623"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2024/04/01/092623">株式会社はてなに入社しました</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">株式会社はてなに入社しました 株式会社はてなに入社しました - hitode909の日記</div><div class="ui-feed-item__date" title="2024-04-01 00:26:23">7ヶ月前</div></div></div><div 
class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2024/02/13/182447"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2024/02/13/182447">似ているけどちょっと違うものをスタイリングする CSS テクニック</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">React + CSS Modules なプロジェクトを例にサンプルコードを書いてるけど、それ以外の構成のプロジェクトでも使えるテクニックのはず。記事タイトルは id:hitode909 さんの 似ているけどちょっと違うものたちをモデリングする技術 - hitode909 のリスペクトです。 data 属性, 属性セレクター, CSS カスタムプロパティを使う 記事のリストがあって、記事のカテゴリごとに文字色やボーダーの色を変えたい、みたいな状況だったとする。多分素朴に書くと以下のようになるはず。 import styles from &#39;./Entry.module.css&#39;; import …</div><div class="ui-feed-item__date" title="2024-02-13 09:24:47">8ヶ月前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/12/15/012937"><img 
src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/12/15/012937">fetch の中断と Back/Forward Cache からの復元で発生する奇妙な現象について</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">TL;DR あるリソースの fetch 中にページ遷移すると、一部ブラウザでは fetch が中断される 中断されると、TypeError が throw される ページ遷移時は、ブラウザによって遷移前のページの実行が&quot;停止&quot;され、&quot;捨てられる&quot;ので、通常 throw された後のことは考えなくて良い しかし、そのページが Back/Forward Cache から復元されうるなら、話は別 ブラウザバックすると、エラーが throw された後からページが再開される！！！ そして発生する、奇妙な現象の数々... はじまりは、あるサービスの不具合報告 ある日、「Webサービスから外部サービスにページ…</div><div class="ui-feed-item__date" title="2023-12-14 16:29:37">10ヶ月前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/12/04/093000"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" 
height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/12/04/093000">ESLint の Suggestions から学ぶ、コードの自動修正の奥深さ</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">これは、はてなエンジニアアドベントカレンダー2023 4日目の記事です。 3日目は id:mechairoi さんの「SQLiteでLinderaを使った日本語全文検索」でした。 blog.chairoi.me 今日のテーマは、JavaScript 向けの Linter 「ESLint」についてです。ESLint を使うと、JavaScript で書かれたコードを静的解析して、よくある間違いを検出したり、コーディングスタイルを統一できます。 通常、ESLint のルールによって報告された問題 (error や warn) は人が手で修正します。ただし、ルールが報告する問題の中には「fixabl…</div><div class="ui-feed-item__date" title="2023-12-04 00:30:00">1年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/09/28/174037"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" 
href="https://www.mizdra.net/entry/2023/09/28/174037">GraphQL のレスポンスのモックデータの作成を補助する TypeScript ライブラリを作った</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">GraphQL を使って Web アプリケーションを実装していると、GraphQL API のリクエストをモックしたいことがあると思います。 ユニットテストのために、ダミーレスポンスに差し替えたい ビジュアルリグレッションテストのために、ダミーレスポンスに差し替えたい Storybook で story を書くために、ダミーレスポンスに差し替えたい バックエンドの resolver 実装を待たずにフロントエンド側の開発を始めるために、ダミーレスポンスに差し替えたい 一般には GraphQL Client にモックするための機能が実装されてるので、そうしたものを使うことが多いと思います。 zen…</div><div class="ui-feed-item__date" title="2023-09-28 08:40:37">1年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/09/11/141933"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/09/11/141933">react-relay の useFragment で本来取得できるはずの field が欠損する現象について</a><div
 class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">react-relay を使っていると、稀に「本来取得できるはずの field が欠けた状態のオブジェクトが useFragment から返される」現象に遭遇することがあります。 例えば、以下のようなエントリーのタイトルと本文を表示するエントリーページがあったと仮定します。デフォルトではタイトルのみが表示されていて、「本文を表示」ボタンを押すと、GraphQL API から本文が fetch されて表示されます。 import {PreloadedQuery, usePreloadedQuery, graphql, useFragment, useLazyLoadQuery} from &#39;re…</div><div class="ui-feed-item__date" title="2023-09-11 05:19:33">1年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/08/03/181550"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/08/03/181550">Next.js で言語ごとに異なるアセット画像を埋め込む</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
多言語対応している Web アプリで、あらかじめファイルに書き出しておいた画像 (アセット) が言語別にあって、それをページに埋め込むにはどうするか、という話題です。基本は言語ごとに別々の画像を出すことないと思いますが、たまーにあるんですよね。例えばGoogle Play のバッジが言語ごとに違うので、これを言語ごとに出し分けたいとか。 Google Play バッジ – Google 色々方法があるので、それをいくつか紹介します。 方法1. import 文を言語の数だけ書く シンプルにやるなら、言語の数だけ import 文を書いて、next/image の &lt;Image&gt; コンポーネント…</div><div class="ui-feed-item__date" title="2023-08-03 09:15:50">1年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/08/02/112613"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/08/02/112613">Relay の %future added value, %other との向き合い方</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
前提 まず議論の土台は https://github.com/facebook/relay/issues/2351 GraphQL では Enum に対する variant の追加が破壊的変更になりうる 新しい variant が来ることを考慮してなくて、突然アプリケーションが壊れる可能性がある 自分たちで実装している GraphQL API なら、variant の追加タイミングを調整できるので問題にならないようにもできる しかし、外部の GraphQL API サーバーを利用している場合は、追加タイミングを予知できないので、ある日突然壊れる そのため、Relay は未知の値が来ても壊れない…</div><div class="ui-feed-item__date" title="2023-08-02 02:26:13">1年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/07/10/101128"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/07/10/101128">アセットの import を簡単にする TypeScript Language Service Plugin を作った</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
Web ページを作るときに、あらかじめファイルに書き出しておいた画像 (アセット) をページに埋め込みたいことがよくあると思います。例えばヘッダーにサービスのロゴ画像を埋め込む場合、以下のようなコードを書くと思います。 // src/components/Header.tsx export function Header() { return ( &lt;header&gt; &lt;img src=&quot;/assets/logo.png&quot; alt=&quot;Logo image&quot; /&gt; {/* ... */} &lt;/header&gt; ); } 一方で、最近のWeb フロントエンドフレームワーク (例: Next.js, Re…</div><div class="ui-feed-item__date" title="2023-07-10 01:11:28">1年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/07/02/214148"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/07/02/214148">Node.js でフィクスチャーファイルを簡単に作成するライブラリを作った</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
よく Node.js で CLI ツールを作っているのだけど、そのテストコードを書くのが大変だなあという課題感があった。例えば、ESLint のエラーをルールごとにグルーピングして、ルール単位で修正できるツール (eslint-interactive) を作ったときは、以下のようなテストコードを書いていた。 // fixtures/semi.js const val = 0 // fixtures/prefer-const.js let val = 0; // fixtures/.eslintrc.js module.exports = { root: true, parserOptions:…</div><div class="ui-feed-item__date" title="2023-07-02 12:41:48">1年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/06/29/121710"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/06/29/121710">Next.js で SSR を強制する</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
SSG も ISR も SSR も、どれも便利なのだけど、どれも扱いが難しい！ SSR 1つを取っても、first paint の状態で GraphQL API から取得したデータがレンダリングされた状態を目指すなら、それなりに複雑な仕組みを getServerSideProps/_app.ts に実装しないといけない。 BFF で GraphQL API を叩いて、その結果を pageProps に焼き込んで、 コンポーネントのレンダリング時に pageProps から結果を取り出して GraphQL クライアントのキャッシュにそれを書き込んで…みたいなことを SSR でやる必要がある訳だけ…</div><div class="ui-feed-item__date" title="2023-06-29 03:17:10">1年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/05/09/011956"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/05/09/011956">Relay でも msw の handler を型付きで書く</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
msw を使うと、GraphQL API をモックしてダミーレスポンスを返せます。以下のような handler と、その他少々のセットアップコードを用意するだけで簡単にモックできます。 // src/mocks/handlers.js import { graphql } from &#39;msw&#39;; export const handlers = [ // ブログのトップページのクエリをモックする handler。 // `graphql.query` の第一引数には、 // `query &lt;クエリ名&gt; { ... }` の `&lt;クエリ名&gt;` の部分に対応した文字列を書く。 graphql.que…</div><div class="ui-feed-item__date" title="2023-05-08 16:19:56">1年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/05/02/000734"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/05/02/000734">npm package を実装するための自分専用テンプレートリポジトリを作った</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
npm package を作る度にイチから開発環境の構築をしていて大変だったので、自分専用のテンプレートリポジトリを作りました *1。 github.com せっかくなので、テンプレートの特徴とか、どういうこと考えながら作ったとか紹介してみます。 はじめに: 基本的な技術スタック npm TypeScript Node.js Native ESM Prettier ESLint Vitest Renovate GitHub Actions vscode 向けの各種設定ファイル (extensions.json, launch.json, settings.json) GitHub の「テンプレ…</div><div class="ui-feed-item__date" title="2023-05-01 15:07:34">1年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/04/09/014905"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/04/09/014905">Twitter に投稿したツイートを Mastodon に転送するようにした</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
去年の 11 月から続く一連の騒動を受けて、id:mizdra のフォロワーの中でも Twitter から Fediverse に移行してきている人が増えてきた。僕自身は移行するつもりはないけれど、移行したフォロワーが僕のツイートを Fediverse から見れるように、ツイートを Mastodon へと転送するようにしてみた。せっかくなので、そのやり方について書き残しておく。 作戦 IFTTT という「〇〇したらXXする」みたいなピタゴラスイッチをボタンポチポチで作れるサービスがある。これを使い、当該 Twitter アカウントでツイートがされたら、それを契機に Mastodon にトゥート…</div><div class="ui-feed-item__date" title="2023-04-08 16:49:05">2年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/04/01/003748"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/04/01/003748">株式会社はてなに入社しました</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">株式会社はてなに入社しました 株式会社はてなに入社しました - hitode909の日記</div><div class="ui-feed-item__date" title="2023-03-31 15:37:48">2年前</div></div></div><div 
class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/03/31/015616"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/03/31/015616">Next.js の getServerSideProps を共通化する</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">Next.js で開発していると、複数のページの getServerSidePropsで同じようなコードを度々書くことになると思う。例えば 「GraphQL クライアントでクエリを fetch して、そのレスポンスをpagePropsに焼き込むロジック」であったり、「(マルチテナントアプリケーションにおいて) リクエストヘッダーからテナントを特定するロジック」であったり。こうした大部分のページで使われるロジックのコードは、何度も書かずに済むよう、何らかの共通化をしたくなる。 すでに色々な人が似たような動機でgetServerSidePropsを共通化する方法を紹介していると思う。それを参考にし…</div><div class="ui-feed-item__date" title="2023-03-30 16:56:16">2年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/03/21/004351"><img 
src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/03/21/004351">YAPC::Kyoto 2023 に参加してきた</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">登壇とかではなく、いち聴者として参加してきました。 yapcjapan.org 前日祭も参加していて、土日での京都滞在でした。 yapcjapan.connpass.com 僕と YAPC YAPC への参加は去年の YAPC::Japan::Online 2022 に続いてとなり、YAPC::Kyoto 2023 で2回目です。オフラインの YAPC は初めてでした。 また、別の話として新卒入社のタイミングがコロナと重なっており、参加人数が数百人超える大きなカンファレンスに出たことがほとんどありませんでした (入社前のものを含めると HTML5 Conference 2018 と build…</div><div class="ui-feed-item__date" title="2023-03-20 15:43:51">2年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/02/12/205109"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a
 class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/02/12/205109">CPU シミュレータを用いて継続的ベンチマークを安定化させる</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">id:mizdra は eslint-interactive というツールをメンテナンスしています。このツールを使うと、多数の ESLint エラーを効率的に修正できます (詳しくは以前書いた記事を見てください)。 www.mizdra.net eslint-interactive では「中規模〜大規模なコードベースであってもキビキビ動く」を大事にしてます。その一環として、eslint-interactive には CI (GitHub Actions) でベンチマークを取り、以前から大きく劣化していたら CI を fail させる仕組みがあります。 https://github.com/mi…</div><div class="ui-feed-item__date" title="2023-02-12 11:51:09">2年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/01/31/012705"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/01/31/012705">試行錯誤を邪魔しない開発環境</a><div 
class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">ある機能を実装する際、完成形のコードになるまでには、プログラムとして不正確な状態や、プロダクト品質ではない状態を経る 静的型検査や lint rule に違反したコードが途中に挟まる 型エラーや lint エラーは望ましくないので、できるだけ早くこうした情報を開発者に伝え、気付けるようにすると良い CI でこうしたエラーを検知して、Pull Request をマージする前に気づけるようにするとか エディタ上にエラーの情報を表示して、コーディング中に気づけるようにするとか エラーを積極的に通知してくれるのはありがたいけど、やりすぎには注意するべき なんとなくでも動いてくれたほうが嬉しい 例えば …</div><div class="ui-feed-item__date" title="2023-01-30 16:27:05">2年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/01/22/232956"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/01/22/232956">ネイティブモジュールに依存しない node-canvas 代替ライブラリを使う</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
Web フロントエンドにて、Canvas を使った View のテストを書きたいことがたまにあります。ブラウザであれば以下のようにして Canvas を利用できますが、テストが実行される Node.js ではそのような API は生えていません。 const canvas = document.createElement(&#39;canvas&#39;); canvas.width = 200; canvas.height = 200; const ctx = canvas.getContext(&#39;2d&#39;); ctx.fillStyle = &#39;green&#39;; ctx.fillRect(10, 10, 150…</div><div class="ui-feed-item__date" title="2023-01-22 14:29:56">2年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/01/13/123211"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/01/13/123211">ある Web ページに関するリソースのうち、ブラウザにリークしているものを調べる</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
最近の Web フロントエンドの開発では、JavaScript/CSS ファイルを bundler (webpack, vite, ...) でバンドルして、それをブラウザに配信することが多いと思います。 例えば以下のようなコードを bundler でバンドルすると、react + react-dom/client + ./locales/ja-JP.json が結合された bundle.js というファイルが生成されます (出力されるファイル名は bundler によって異なるのでイメージです)。 import React from &#39;react&#39;; import { createRoot …</div><div class="ui-feed-item__date" title="2023-01-13 03:32:11">2年前</div></div></div><div class="ui-feed-item"><a class="ui-feed-item__og-image" href="https://www.mizdra.net/entry/2023/01/13/013855"><img src="../../images/alternate-feed-image.png" loading="lazy" alt="記事のアイキャッチ画像" width="256" height="256"></a><div class="ui-feed-item__content"><a class="ui-feed-item__title" href="https://www.mizdra.net/entry/2023/01/13/013855">next lint は lint 対象のディレクトリが制限されている</a><div class="ui-feed-item__blog-title">mizdra&#39;s blog</div><div class="ui-feed-item__summary">
ということに next lint を触っていて気づきました。公式ドキュメントにもそう書いてありました。 next lint runs ESLint for all files in the pages, components, and lib directories. It also provides a guided setup to install any required dependencies if ESLint is not already configured in your application. (https://nextjs.org/docs/api-reference/…</div><div class="ui-feed-item__date" title="2023-01-12 16:38:55">2年前</div></div></div></div></div></section></main><footer role="contentinfo" class="ui-section-footer"><div class="ui-layout-container"><div class="ui-layout-column-6 ui-layout-column-center"><div class="ui-component-cta ui-layout-flex ui-section-footer__site-info"><p class="ui-text-note">このサイトはJSer.infoの情報源となるサイトの更新を一覧できる目的で作成されたものです。<br>一つのRSSフィードを購読するだけで、複数のサイトの更新情報を取得できます。</p><p class="ui-text-note">このサイトの仕組みは、<a href="https://github.com/jser/watch-list-rss/">GitHubのREADME</a>で公開されています。</p></div></div></div><div class="ui-layout-container"><div class="ui-section-footer__layout ui-layout-flex"><p 
class="ui-section-footer--copyright ui-text-note"><a class="ui-text-note" href="https://github.com/jser/"><small>@jser</small></a></p><a href="https://github.com/jser/watch-list-rss/" role="link" aria-label="#" class="ui-text-note"><small>GitHub</small></a></div></div></footer></body></html>